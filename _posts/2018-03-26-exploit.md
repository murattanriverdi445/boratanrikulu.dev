---
layout: post
title: "Exploit"
tags: [Security]
subtitle: "exploit'in ne olduğunu örnekler ile destekleyerek açıklar."
---

***Yazan: [boratanrikulu](https://github.com/boratanrikulu)***

**Kaynaklar**  
[tr.wikipedia.org/wiki/exploit](https://tr.wikipedia.org/wiki/Exploit)  
[medium.com/@celk0irem007/kevgir-yetki-yukseltme](https://medium.com/@celk0irem007/kevgir-yetki-y%C3%BCkseltme-299c65086173)  
[github.com/rapid7/how-to-use-msfvenom](https://github.com/rapid7/metasploit-framework/wiki/How-to-use-msfvenom)

---

## Exploit Nedir ?

- Ingilizcede "kendi çıkarına kullanmak" anlamına gelen **exploit**; bug ya da açıkların yaratabileceği istenmeyen durumlardan yararlanan komut dizisidir.
	
	Exploit'ler genellikle hedef sistemin kontrolünü kazanma, yetki yükseltme ya da DDOS atakları gibi şeyler için kullanılır.

---

## Exploit Türleri

- Çeşitli exploit'ler mevcuttur:
	
	| Türler      |
	|:------------:|
    | Local Exploits |
    | Remote Exploits |
    | Dos-Exploits | 
    | Command-Execution-Exploits |
    | SQL-Injection-Exploits |
    | Zero-Day-Exploits |

#### Local Exploits

- Local Exploit'ler mesela bir **.exe**, **.gif** gibi dosya çalıştırıldığında devreye girer ve yerel bilgisayarda yüklü olan vulnerable (savunmasız/yaralı) yazılım sayesınde exploit'te entegre edilmiş **Shellcode**'u çalıştır ve kötü kod enjekte eder. Bunun sayesinde saldırgan yüksek haklara sahip olur.

#### Remote Exploits

- Bir Remote Exploit **Internet(ağ)** üzerinden çalışmakta ve mevcut olan güvenlik açığını kullanarak, bir vulnerable sisteme erişim sağlamaktadır.

#### Dos Exploits

- İlk tanınmış olan açığı yazılan exploit'ler Dos-Exploitlerdir (Denial - of Service). Bir sistemi yavaşlandıran veya durduran bir etki gösterir.

#### Zero-Day Exploits

- Tespit edilen açığa yönelik **aynı gün yazılan** exploit'lerdir. Bu tür açıklar, hiç bir üretici ya da geliştirici tarafından yamanmamış oldukları için çok tehlikelidir.

---

## Exploit Databases

- [0day.today](https://0day.today)

    ![0day-terms](/img/exploit/3.png)
    ![0day-home](/img/exploit/2.png)
    ![0day-twitter](/img/exploit/5.png)
    ![0day-instagram](/img/exploit/8.png)

- [exploit-db.com](https://www.exploit-db.com/)

    ![exploitdb](/img/exploit/4.png)

    ![exploitdb-firefox](/img/exploit/7.png)

    **Remote Exploit**'lere örnek olan bu exploit'i test edelim: [Firefox 46.0.1 - Remote Code Execution](https://www.exploit-db.com/exploits/44293/)

    #### [[VIDEO] Firefox 46.0.1 - Remote Code Execution](https://www.youtube.com/embed/n5tFqKpv3V0)

    Sonuç başarılı!

- [rapid7.com/db/modules](https://www.rapid7.com/db/modules)

    ![rapid7](/img/exploit/9.png)

---

## Metasploit

- Metasploit Framework, hedef sistemlere karşı tool geliştirme ve exploit çalıştırma için en çok kullanılan açık kaynak kodlu exploit framework'udur.

    ![metasploit](/img/exploit/10.png)
    ![metasploit](/img/exploit/1.png)
    ![metasploit](/img/exploit/18.png)

    | Kavram | Açıklama |
    |:------:|:--------:|
    | **Exploit** | Bir sistemin açığını sömürüp, ele geçirip bilgi toplamak amacıyla yazılımsal olarak da oluşturulan araçlardır. |
    | **Payload** | Exploit'in hedef sisteme ulaşmasını sağlar. Bir kamyon gibi düşünülebilir. |
    | **Auxiliary** | Bilgi toplama amaçlı kullanılan yardımcı programlar ve araçlardır. |
    | **Encoders** | Şifreleme amaçlı kullanılır. Oluşturulan exploit'ler encode edilerek hedef sistemin fark etmesi ihtimali düşürülür. |
    | **Post** | Exploit işlemi sonrasındanki işlemler için kullanılır. |
    | **Nops** | No Operation anlamına gelmektedir. Payload'ların boyutunu ayarlamak(sabit tutmak) için kullanılır. Örneğin x86 işlemciler x90 assembly koduna karışılık bir işlemde bulunmaz. |

---

## Windows Makine Uzerine Test

- Meterpreter Payload'ı kullanarak basit bir **Local Exploit** örneği:

    ![win](/img/exploit/11.png)
    ![win](/img/exploit/12.png)
    ![win](/img/exploit/19.png)
    ![win](/img/exploit/13.png)
    ![win](/img/exploit/14.png)
    ![win](/img/exploit/15.png)
    ![win](/img/exploit/16.png)
    
    #### [[VIDEO] LOCAL EXPLOIT](https://www.youtube.com/embed/6wbJDlZSOeY)

---

## Kevgir - Sızma ve Yetki Yükseltme

- NMAP ile network'ümüzü tarayalım.

    ![kevgir](/img/exploit/20.png)
    
- IP'sinin **10.0.2.19** olduğunu bildiğimiz kevgir cihazı üzerindeki servisler için tarama işlemi gerçekleştirelim.

    ![kevgir](/img/exploit/21.png)

- **Tomcat Servisi**nin çalıştığını gördük. Bu servis üzerinde Brute Force işlemi ile **default user-password** ikililerini deniyoruz.

    ![kevgir](/img/exploit/22.png)

    ![kevgir](/img/exploit/23.png)

- Denemelerimiz sonucunda tomcat-tomcat ikilisinin doğru olduğunu anladık.

    ![kevgir](/img/exploit/24.png)

- Sisteme sızmak ve shell'e düşebilmek için **exploit/multi/http/tomcat_mgr_upload**' ı kullanıyoruz.

    ![kevgir](/img/exploit/25.png)

- **Options**'da gördüğümüz gerekliliklere uygun bilgileri girip, **exploit** işlemini başlatıyoruz.

    ![kevgir](/img/exploit/26.png)

- Exploit işlemi sonrasında meterpreter'a düştükten sonra shell'e düşmek için python'ı kullanıyoruz.

    ![kevgir](/img/exploit/27.png)

- Sistem hakkında bilgi toplamak için aşağıdaki komutları kullanıyoruz.

    ![kevgir](/img/exploit/28.png)

- Yetki sistemi için uygun exploit arıyoruz. Exploit-DB'de aşağıdaki gibi bir örnek mevcut. 

    ![kevgir](/img/exploit/29.png)

- Şuan bulunduğumuz kullanıcının yetkileri yapmaya çalışacağımız yetki yükseltme işlemi için yeterli değil. Bu yüzden **cat /etc/passwd** ile sistemde mevcut olan kullanıcılara bakıyoruz. 

    ![kevgir](/img/exploit/30.png)

- **admin** kullanıcısı dikkat çekici, default password bırakılmış olma ihtimaline karşın denemelerde bulunuyoruz ve **admin-admin** ikili ise giriş yapabildiğimizi görüyoruz.

    ![kevgir](/img/exploit/31.png)

- exploit-db'de gördüğümüz exploit'i indirip çalıştırıyoruz.

    ![kevgir](/img/exploit/32.png)

- Görüldüğü gibi yetki yükseltme işlemi başarı ile gerçekleşmiş oluyor.

    ![kevgir](/img/exploit/33.png)